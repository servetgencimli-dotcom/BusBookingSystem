<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<StackPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="controller.CityCardController"
           style="-fx-background-color: linear-gradient(from 0% 0% to 100% 100%, #667eea, #764ba2);">

    <!-- Ana Container -->
    <BorderPane prefWidth="1100" prefHeight="750"
                style="-fx-background-color: white;
                       -fx-background-radius: 25;
                       -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 40, 0, 0, 10);">
        <StackPane.margin>
            <Insets top="30" bottom="30" left="30" right="30"/>
        </StackPane.margin>

        <!-- Top Navigation Bar -->
        <top>
            <VBox>
                <!-- Navigation -->
                <HBox alignment="CENTER_LEFT" spacing="30"
                      style="-fx-background-color: white;
                             -fx-padding: 20 40;
                             -fx-border-color: #e5e7eb;
                             -fx-border-width: 0 0 1 0;">
                    <HBox alignment="CENTER_LEFT" spacing="12" HBox.hgrow="ALWAYS">
                        <StackPane style="-fx-background-color: linear-gradient(from 0% 0% to 100% 100%, #667eea, #764ba2);
                                          -fx-background-radius: 12;
                                          -fx-pref-width: 50;
                                          -fx-pref-height: 50;">
                            <Label text="ðŸ’³" style="-fx-font-size: 28; -fx-text-fill: white;"/>
                        </StackPane>
                        <VBox>
                            <Label text="City Card Store"
                                   style="-fx-font-size: 20;
                                          -fx-font-weight: bold;
                                          -fx-text-fill: #1f2937;"/>
                            <Label text="ÅžÉ™hÉ™r KartÄ± MaÄŸazasÄ±"
                                   style="-fx-font-size: 12;
                                          -fx-text-fill: #6b7280;"/>
                        </VBox>
                    </HBox>

                    <HBox alignment="CENTER_RIGHT" spacing="15">
                        <Button text="Ana SÉ™hifÉ™"
                                style="-fx-background-color: transparent;
                                       -fx-text-fill: #6b7280;
                                       -fx-font-size: 14;
                                       -fx-cursor: hand;
                                       -fx-padding: 8 16;"/>
                        <Button text="ÅžÉ™hÉ™r KartÄ±"
                                style="-fx-background-color: #ede9fe;
                                       -fx-text-fill: #7c3aed;
                                       -fx-font-size: 14;
                                       -fx-font-weight: bold;
                                       -fx-background-radius: 8;
                                       -fx-cursor: hand;
                                       -fx-padding: 8 16;"/>
                        <StackPane style="-fx-background-color: #f3f4f6;
                                          -fx-background-radius: 50;
                                          -fx-pref-width: 40;
                                          -fx-pref-height: 40;
                                          -fx-cursor: hand;">
                            <Label text="ðŸ‘¤" style="-fx-font-size: 18;"/>
                        </StackPane>
                    </HBox>
                </HBox>

                <!-- Page Header -->
                <VBox style="-fx-background-color: linear-gradient(to right, #f9fafb, #f3f4f6);
                             -fx-padding: 40 40 30 40;">
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <StackPane style="-fx-background-color: linear-gradient(from 0% 0% to 100% 100%, #f59e0b, #d97706);
                                          -fx-background-radius: 15;
                                          -fx-pref-width: 70;
                                          -fx-pref-height: 70;
                                          -fx-effect: dropshadow(gaussian, rgba(245,158,11,0.4), 15, 0, 0, 5);">
                            <Label text="ðŸŽ«" style="-fx-font-size: 36;"/>
                        </StackPane>
                        <VBox spacing="5">
                            <Label text="ÅžÉ™hÉ™r KartÄ± Al"
                                   style="-fx-font-size: 32;
                                          -fx-font-weight: bold;
                                          -fx-text-fill: #111827;"/>
                            <Label text="Global vÉ™ ya fÉ™rdi ÅŸÉ™hÉ™r kartÄ± seÃ§in vÉ™ 20% endirimdÉ™n yararlanÄ±n"
                                   style="-fx-font-size: 15;
                                          -fx-text-fill: #6b7280;"/>
                        </VBox>
                    </HBox>
                </VBox>
            </VBox>
        </top>

        <!-- Main Content -->
        <center>
            <ScrollPane fitToWidth="true"
                        style="-fx-background: transparent;
                               -fx-background-color: transparent;">
                <HBox spacing="30" alignment="CENTER" style="-fx-padding: 40;">

                    <!-- Left Side - Card Options -->
                    <VBox spacing="25" prefWidth="550"
                          style="-fx-background-color: white;
                             -fx-background-radius: 20;
                             -fx-padding: 40;
                             -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 25, 0, 0, 5);">

                        <VBox spacing="8">
                            <Label text="Kart NÃ¶vÃ¼ SeÃ§in"
                                   style="-fx-font-size: 24;
                                      -fx-font-weight: bold;
                                      -fx-text-fill: #111827;"/>
                            <Label text="SizÉ™ uyÄŸun paketi seÃ§in"
                                   style="-fx-font-size: 14;
                                      -fx-text-fill: #6b7280;"/>
                        </VBox>

                        <Separator style="-fx-background-color: #e5e7eb;"/>

                        <!-- Card Type Selection -->
                        <VBox spacing="15">
                            <!-- GLOBAL Card Option -->
                            <VBox spacing="12"
                                  style="-fx-background-color: linear-gradient(from 0% 0% to 100% 100%, #f59e0b, #d97706);
                                     -fx-background-radius: 15;
                                     -fx-padding: 25;
                                     -fx-effect: dropshadow(gaussian, rgba(245,158,11,0.3), 15, 0, 0, 3);">
                                <HBox alignment="CENTER_LEFT" spacing="15">
                                    <RadioButton fx:id="globalCardRadio"
                                                 style="-fx-font-size: 16;
                                                    -fx-text-fill: white;"/>
                                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                                        <HBox spacing="10" alignment="CENTER_LEFT">
                                            <Label text="ðŸŒ" style="-fx-font-size: 24;"/>
                                            <Label text="GLOBAL Kart"
                                                   style="-fx-font-size: 20;
                                                      -fx-font-weight: bold;
                                                      -fx-text-fill: white;"/>
                                        </HBox>
                                        <Label text="BÃ¼tÃ¼n ÅŸÉ™hÉ™rlÉ™rdÉ™ keÃ§É™rlidir"
                                               style="-fx-text-fill: rgba(255,255,255,0.95);
                                                  -fx-font-size: 14;"/>
                                        <HBox spacing="8" alignment="CENTER_LEFT">
                                            <Label text="ðŸ’°" style="-fx-font-size: 18;"/>
                                            <Label text="60 AZN / ay"
                                                   style="-fx-font-size: 18;
                                                      -fx-font-weight: bold;
                                                      -fx-text-fill: white;"/>
                                        </HBox>
                                    </VBox>
                                </HBox>

                                <VBox spacing="8" style="-fx-padding: 10 0 0 35;">
                                    <HBox spacing="8">
                                        <Label text="âœ“" style="-fx-text-fill: #10b981; -fx-font-size: 14; -fx-font-weight: bold;"/>
                                        <Label text="Limitsiz sÉ™yahÉ™t"
                                               style="-fx-text-fill: rgba(255,255,255,0.95);
                                                  -fx-font-size: 13;"/>
                                    </HBox>
                                    <HBox spacing="8">
                                        <Label text="âœ“" style="-fx-text-fill: #10b981; -fx-font-size: 14; -fx-font-weight: bold;"/>
                                        <Label text="BÃ¼tÃ¼n ÅŸÉ™hÉ™rlÉ™rdÉ™ keÃ§É™rli"
                                               style="-fx-text-fill: rgba(255,255,255,0.95);
                                                  -fx-font-size: 13;"/>
                                    </HBox>
                                    <HBox spacing="8">
                                        <Label text="âœ“" style="-fx-text-fill: #10b981; -fx-font-size: 14; -fx-font-weight: bold;"/>
                                        <Label text="Premium dÉ™stÉ™k"
                                               style="-fx-text-fill: rgba(255,255,255,0.95);
                                                  -fx-font-size: 13;"/>
                                    </HBox>
                                </VBox>
                            </VBox>

                            <!-- Custom Cities Card Option -->
                            <VBox spacing="12"
                                  style="-fx-background-color: #f3f4f6;
                                     -fx-background-radius: 15;
                                     -fx-padding: 25;
                                     -fx-border-color: #d1d5db;
                                     -fx-border-width: 2;
                                     -fx-border-radius: 15;">
                                <HBox alignment="CENTER_LEFT" spacing="15">
                                    <RadioButton fx:id="customCardRadio"
                                                 selected="true"
                                                 style="-fx-font-size: 16;"/>
                                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                                        <HBox spacing="10" alignment="CENTER_LEFT">
                                            <Label text="ðŸ™" style="-fx-font-size: 24;"/>
                                            <Label text="FÉ™rdi ÅžÉ™hÉ™r KartÄ±"
                                                   style="-fx-font-size: 20;
                                                      -fx-font-weight: bold;
                                                      -fx-text-fill: #374151;"/>
                                        </HBox>
                                        <Label text="Ä°stÉ™diyiniz ÅŸÉ™hÉ™rlÉ™ri seÃ§in"
                                               style="-fx-text-fill: #6b7280;
                                                  -fx-font-size: 14;"/>
                                        <HBox spacing="8" alignment="CENTER_LEFT">
                                            <Label text="ðŸ’°" style="-fx-font-size: 18;"/>
                                            <Label text="15 AZN / ÅŸÉ™hÉ™r / ay"
                                                   style="-fx-font-size: 16;
                                                      -fx-font-weight: bold;
                                                      -fx-text-fill: #374151;"/>
                                        </HBox>
                                    </VBox>
                                </HBox>
                            </VBox>
                        </VBox>

                        <Separator style="-fx-background-color: #e5e7eb;"/>

                        <!-- Custom Cities Configuration -->
                        <VBox fx:id="customCitiesBox" spacing="20">
                            <VBox spacing="8">
                                <Label text="ðŸ“ ÅžÉ™hÉ™rlÉ™ri SeÃ§in"
                                       style="-fx-font-size: 18;
                                          -fx-font-weight: bold;
                                          -fx-text-fill: #374151;"/>
                            </VBox>

                            <!-- City Count Spinner -->
                            <VBox spacing="10">
                                <Label text="ÅžÉ™hÉ™r SayÄ±"
                                       style="-fx-font-size: 14;
                                          -fx-font-weight: 600;
                                          -fx-text-fill: #374151;"/>
                                <HBox spacing="15" alignment="CENTER_LEFT">
                                    <Label text="ðŸ™" style="-fx-font-size: 20;"/>
                                    <Spinner fx:id="cityCountSpinner"
                                             prefWidth="120"
                                             prefHeight="45"
                                             style="-fx-background-color: #f9fafb;
                                                -fx-border-color: #d1d5db;
                                                -fx-border-width: 2;
                                                -fx-border-radius: 10;"/>
                                    <Label text="(Maksimum 10 ÅŸÉ™hÉ™r)"
                                           style="-fx-text-fill: #6b7280;
                                              -fx-font-size: 12;"/>
                                </HBox>
                            </VBox>

                            <!-- Dynamic City Fields Container -->
                            <VBox fx:id="cityFieldsContainer"
                                  spacing="10"
                                  style="-fx-background-color: #f9fafb;
                                     -fx-background-radius: 12;
                                     -fx-padding: 20;">
                            </VBox>
                        </VBox>

                        <Separator style="-fx-background-color: #e5e7eb;"/>

                        <!-- Duration Selection -->
                        <VBox spacing="10">
                            <Label text="â° MÃ¼ddÉ™t SeÃ§in"
                                   style="-fx-font-size: 18;
                                      -fx-font-weight: bold;
                                      -fx-text-fill: #374151;"/>
                            <HBox spacing="15" alignment="CENTER_LEFT">
                                <Label text="ðŸ“…" style="-fx-font-size: 20;"/>
                                <Spinner fx:id="monthsSpinner"
                                         prefWidth="120"
                                         prefHeight="45"
                                         style="-fx-background-color: #f9fafb;
                                            -fx-border-color: #d1d5db;
                                            -fx-border-width: 2;
                                            -fx-border-radius: 10;"/>
                                <Label text="Ay"
                                       style="-fx-text-fill: #374151;
                                          -fx-font-size: 14;
                                          -fx-font-weight: 600;"/>
                                <Label text="(Maksimum 12 ay)"
                                       style="-fx-text-fill: #6b7280;
                                          -fx-font-size: 12;"/>
                            </HBox>
                        </VBox>
                    </VBox>

                    <!-- Right Side - Summary Card -->
                    <VBox spacing="25" prefWidth="420"
                          style="-fx-background-color: white;
                             -fx-background-radius: 20;
                             -fx-padding: 40;
                             -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 25, 0, 0, 5);">

                        <VBox spacing="8">
                            <Label text="ðŸ“Š SifariÅŸ XÃ¼lasÉ™si"
                                   style="-fx-font-size: 22;
                                      -fx-font-weight: bold;
                                      -fx-text-fill: #111827;"/>
                            <Label text="Ã–dÉ™niÅŸ mÉ™lumatlarÄ±"
                                   style="-fx-font-size: 13;
                                      -fx-text-fill: #6b7280;"/>
                        </VBox>

                        <Separator style="-fx-background-color: #e5e7eb;"/>

                        <!-- Summary Box -->
                        <VBox spacing="15"
                              style="-fx-background-color: linear-gradient(from 0% 0% to 100% 100%, #f0fdf4, #dcfce7);
                                 -fx-background-radius: 15;
                                 -fx-padding: 25;">

                            <HBox spacing="12" alignment="CENTER_LEFT">
                                <Label text="ðŸ’³" style="-fx-font-size: 28;"/>
                                <VBox spacing="3">
                                    <Label text="Kart NÃ¶vÃ¼"
                                           style="-fx-font-size: 12;
                                              -fx-text-fill: #166534;"/>
                                    <Label text="Global / FÉ™rdi"
                                           style="-fx-font-size: 16;
                                              -fx-font-weight: bold;
                                              -fx-text-fill: #15803d;"/>
                                </VBox>
                            </HBox>

                            <Separator style="-fx-background-color: rgba(21,128,61,0.2);"/>

                            <HBox spacing="12" alignment="CENTER_LEFT">
                                <Label text="ðŸ™" style="-fx-font-size: 28;"/>
                                <VBox spacing="3">
                                    <Label text="ÅžÉ™hÉ™r SayÄ±"
                                           style="-fx-font-size: 12;
                                              -fx-text-fill: #166534;"/>
                                    <Label text="- ÅŸÉ™hÉ™r"
                                           style="-fx-font-size: 16;
                                              -fx-font-weight: bold;
                                              -fx-text-fill: #15803d;"/>
                                </VBox>
                            </HBox>

                            <Separator style="-fx-background-color: rgba(21,128,61,0.2);"/>

                            <HBox spacing="12" alignment="CENTER_LEFT">
                                <Label text="ðŸ“…" style="-fx-font-size: 28;"/>
                                <VBox spacing="3">
                                    <Label text="MÃ¼ddÉ™t"
                                           style="-fx-font-size: 12;
                                              -fx-text-fill: #166534;"/>
                                    <Label text="1 ay"
                                           style="-fx-font-size: 16;
                                              -fx-font-weight: bold;
                                              -fx-text-fill: #15803d;"/>
                                </VBox>
                            </HBox>

                            <Separator style="-fx-background-color: rgba(21,128,61,0.2);"/>

                            <!-- Total Price -->
                            <VBox spacing="8" alignment="CENTER"
                                  style="-fx-background-color: white;
                                     -fx-background-radius: 12;
                                     -fx-padding: 20;">
                                <Label text="Ãœmumi MÉ™blÉ™ÄŸ"
                                       style="-fx-font-size: 14;
                                          -fx-text-fill: #6b7280;"/>
                                <HBox spacing="10" alignment="CENTER">
                                    <Label text="ðŸ’°" style="-fx-font-size: 32;"/>
                                    <Label fx:id="totalLabel"
                                           text="0.00 AZN"
                                           style="-fx-font-size: 32;
                                              -fx-font-weight: bold;
                                              -fx-text-fill: #10b981;"/>
                                </HBox>
                            </VBox>
                        </VBox>

                        <Separator style="-fx-background-color: #e5e7eb;"/>

                        <!-- Benefits Section -->
                        <VBox spacing="12"
                              style="-fx-background-color: #fef3c7;
                                 -fx-background-radius: 12;
                                 -fx-padding: 20;">
                            <HBox spacing="10" alignment="CENTER_LEFT">
                                <Label text="â­" style="-fx-font-size: 22;"/>
                                <Label text="ÃœstÃ¼nlÃ¼klÉ™r"
                                       style="-fx-font-size: 16;
                                          -fx-font-weight: bold;
                                          -fx-text-fill: #92400e;"/>
                            </HBox>
                            <VBox spacing="8">
                                <HBox spacing="8">
                                    <Label text="âœ“" style="-fx-text-fill: #10b981; -fx-font-size: 14; -fx-font-weight: bold;"/>
                                    <Label text="20% endirim"
                                           style="-fx-text-fill: #78350f;
                                              -fx-font-size: 13;"/>
                                </HBox>
                                <HBox spacing="8">
                                    <Label text="âœ“" style="-fx-text-fill: #10b981; -fx-font-size: 14; -fx-font-weight: bold;"/>
                                    <Label text="SÃ¼rÉ™tli minmÉ™ prosesi"
                                           style="-fx-text-fill: #78350f;
                                              -fx-font-size: 13;"/>
                                </HBox>
                                <HBox spacing="8">
                                    <Label text="âœ“" style="-fx-text-fill: #10b981; -fx-font-size: 14; -fx-font-weight: bold;"/>
                                    <Label text="AylÄ±q Ã¶dÉ™niÅŸ"
                                           style="-fx-text-fill: #78350f;
                                              -fx-font-size: 13;"/>
                                </HBox>
                            </VBox>
                        </VBox>

                        <Separator style="-fx-background-color: #e5e7eb;"/>

                        <!-- Action Buttons -->
                        <VBox spacing="15">
                            <Button text="ðŸ›’  SatÄ±n Al"
                                    onAction="#handlePurchase"
                                    prefWidth="340"
                                    prefHeight="55"
                                    style="-fx-background-color: linear-gradient(from 0% 0% to 100% 100%, #f59e0b, #d97706);
                                       -fx-text-fill: white;
                                       -fx-font-size: 18;
                                       -fx-font-weight: bold;
                                       -fx-background-radius: 12;
                                       -fx-cursor: hand;
                                       -fx-effect: dropshadow(gaussian, rgba(245,158,11,0.4), 15, 0, 0, 5);"/>

                            <Button text="âœ•  LÉ™ÄŸv Et"
                                    onAction="#handleCancel"
                                    prefWidth="340"
                                    prefHeight="50"
                                    style="-fx-background-color: white;
                                       -fx-text-fill: #6b7280;
                                       -fx-font-size: 15;
                                       -fx-font-weight: 600;
                                       -fx-background-radius: 12;
                                       -fx-border-color: #e5e7eb;
                                       -fx-border-width: 2;
                                       -fx-border-radius: 12;
                                       -fx-cursor: hand;"/>
                        </VBox>

                        <!-- Message Label -->
                        <HBox alignment="CENTER">
                            <Label fx:id="messageLabel"
                                   style="-fx-text-fill: #ef4444;
                                      -fx-font-size: 14;
                                      -fx-font-weight: 600;"/>
                        </HBox>
                    </VBox>
                </HBox>
            </ScrollPane>
        </center>

        <!-- Footer -->
        <bottom>
            <HBox alignment="CENTER" spacing="20"
                  style="-fx-background-color: #f9fafb;
                         -fx-padding: 20;
                         -fx-border-color: #e5e7eb;
                         -fx-border-width: 1 0 0 0;">
                <Label text="Â© 2024 City Card System"
                       style="-fx-text-fill: #9ca3af;
                              -fx-font-size: 13;"/>
                <Label text="â€¢" style="-fx-text-fill: #d1d5db;"/>
                <Label text="Version 2.0"
                       style="-fx-text-fill: #9ca3af;
                              -fx-font-size: 13;"/>
                <Label text="â€¢" style="-fx-text-fill: #d1d5db;"/>
                <Label text="ÅžÉ™hÉ™r KartÄ± MaÄŸazasÄ±"
                       style="-fx-text-fill: #9ca3af;
                              -fx-font-size: 13;"/>
            </HBox>
        </bottom>
    </BorderPane>
</StackPane>